<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>BHMS</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <link rel="stylesheet" href="assets/css/Navbar-Centered-Brand-Dark-icons.css">
</head>

<body style="--bs-primary: #5c5cc7;--bs-primary-rgb: 92,92,199;border-style: none;">
    <nav class="navbar navbar-expand-md bg-primary d-lg-flex justify-content-lg-end py-3" data-bs-theme="dark" style="position: static;">
        <div class="container"><a class="btn btn-danger d-lg-flex justify-content-lg-start me-2" role="button" data-bss-hover-animate="pulse" href="#" style="background: var(--bs-danger);border-style: none;border-color: rgb(0,0,0);box-shadow: 0px 0px;position: absolute;transform: translate(-18px);"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-sos" style="color: var(--bs-light);font-size: 34px;">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                    <path d="M7 8h-3a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-3"></path>
                    <path d="M10 8h4v8h-4z"></path>
                    <path d="M17 16h3a1 1 0 0 0 1 -1v-2a1 1 0 0 0 -1 -1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1h3"></path>
                </svg></a><button class="btn btn-info" data-bss-hover-animate="pulse" type="button" style="padding: 10px 20px;" data-bs-toggle="offcanvas" data-bs-target="#offcanvas-1"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-square-rounded-arrow-right-filled" style="font-size: 19px;">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                    <path d="M12 2c-.218 0 -.432 .002 -.642 .005l-.616 .017l-.299 .013l-.579 .034l-.553 .046c-4.785 .464 -6.732 2.411 -7.196 7.196l-.046 .553l-.034 .579c-.005 .098 -.01 .198 -.013 .299l-.017 .616l-.004 .318l-.001 .324c0 .218 .002 .432 .005 .642l.017 .616l.013 .299l.034 .579l.046 .553c.464 4.785 2.411 6.732 7.196 7.196l.553 .046l.579 .034c.098 .005 .198 .01 .299 .013l.616 .017l.642 .005l.642 -.005l.616 -.017l.299 -.013l.579 -.034l.553 -.046c4.785 -.464 6.732 -2.411 7.196 -7.196l.046 -.553l.034 -.579c.005 -.098 .01 -.198 .013 -.299l.017 -.616l.005 -.642l-.005 -.642l-.017 -.616l-.013 -.299l-.034 -.579l-.046 -.553c-.464 -4.785 -2.411 -6.732 -7.196 -7.196l-.553 -.046l-.579 -.034a28.058 28.058 0 0 0 -.299 -.013l-.616 -.017l-.318 -.004l-.324 -.001zm.613 5.21l.094 .083l4 4a.927 .927 0 0 1 .097 .112l.071 .11l.054 .114l.035 .105l.03 .148l.006 .118l-.003 .075l-.017 .126l-.03 .111l-.044 .111l-.052 .098l-.074 .104l-.073 .082l-4 4a1 1 0 0 1 -1.497 -1.32l.083 -.094l2.292 -2.293h-5.585a1 1 0 0 1 -.117 -1.993l.117 -.007h5.585l-2.292 -2.293a1 1 0 0 1 -.083 -1.32l.083 -.094a1 1 0 0 1 1.32 -.083z" fill="currentColor" stroke-width="0"></path>
                </svg></button><a class="navbar-brand fs-4 text-center link-dark text-bg-success border rounded border-0 shadow d-flex align-items-center" href="#" style="--bs-secondary: #000080;--bs-secondary-rgb: 0,0,128;--bs-success: #6CFF52;--bs-success-rgb: 108,255,82;box-shadow: 0px -49px 8px 5px;position: static;transform: perspective(0px) translate(72px) scale(1.04) skew(-19deg);"><span><strong>Boral Hall Management System</strong></span></a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-6"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse flex-grow-0 order-md-first" id="navcol-6">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"></li>
                    <li class="nav-item"></li>
                </ul>
                <div class="d-md-none my-2"><button class="btn btn-light me-2" type="button">Button</button><button class="btn btn-primary" type="button">Button</button></div>
            </div>
            <div class="d-none d-md-block" style="transform: translate(30px);"><a class="btn btn-secondary me-2" role="button" data-bss-hover-animate="pulse" href="profile.html" style="background: #65558F;border-style: none;border-color: rgb(0,0,0);"><i class="fas fa-user" style="color: var(--bs-light);"></i></a><a class="btn btn-light me-2" role="button" data-bss-hover-animate="pulse" href="#" style="background: #65558F;border-style: none;"><i class="fas fa-bell" style="color: var(--bs-light);"></i></a><a class="btn btn-light me-2" role="button" data-bss-hover-animate="pulse" href="#" style="border-style: none;background: #65558F;"><i class="fas fa-power-off" style="color: var(--bs-light);"></i></a></div>
        </div>
    </nav>
    <div class="card" style="padding: 10px 40px 10px 40px;height: fit-content;"><img class="card-img w-100 d-block" alt="a black and white photo of a wall" style="background: var(--bs-secondary);" src="assets/img/photo-1454117096348-e4abbeba002c.jpg">
        <div class="card-img-overlay text-center border rounded" style="padding: 20px 90px 0px 90px;">
            <div style="width: 69px;max-height: inherit;height: inherit;"></div>
            <h4 class="text-uppercase fs-2 fw-bold text-center">Complain Box</h4>
            <h4 class="fs-5 fw-bold text-start" style="padding: 5% 0px 0px 0px;width: fit-content;">Title</h4><input type="text" style="max-width: 1300px;min-width: 150px;width: 97%;height: 40px;" placeholder="Enter Your Complaint’s Subject in 2 to 3 words">
            <h4 class="fs-5 fw-bold text-start" style="padding: 5% 0px 0px 0px;width: fit-content;">Description</h4><textarea style="width: 97%;height: 30%;" placeholder="Describe your complaint.If you have any solution for your complaint,describe it too."></textarea><button class="btn btn-success" data-bss-hover-animate="pulse" type="button" style="margin: 5%;">Submit</button>
        </div>
    </div>
    <footer class="text-center py-4">
        <div class="container">
            <div class="row row-cols-1 row-cols-lg-3" style="transform: rotate(0deg) skew(0deg);transform-origin: bottom;">
                <div class="col"><a class="link-secondary" href="https://www.linkedin.com/in/raufirzaman/">Raufir Zaman Choudhury</a></div>
                <div class="col"><a class="link-secondary" href="https://www.facebook.com/mueid016">Md Mueid Shahriar</a></div>
                <div class="col">
                    <ul class="list-inline my-2">
                        <li class="list-inline-item"><a class="link-secondary" href="https://www.linkedin.com/in/syed-sharzil-ahmmed-71a192266/">Syed Sharzil Ahmmed</a></li>
                        <li class="list-inline-item"></li>
                    </ul>
                </div>
            </div>
            <div class="row row-cols-1 row-cols-lg-3" style="transform: scale(0.88);height: fit-content;">
                <div class="col-lg-2 offset-lg-5" style="height: fit-content;"><small class="lh-sm" style="height: fit-content;"><br>2025 ©RSM<br><br>&nbsp;</small></div>
            </div>
        </div>
    </footer>
    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvas-1" style="width: fit-content;">
        <div class="bg-body shadow d-flex flex-column flex-shrink-0 position-fixed top-0 bottom-0" style="width: 4.5rem;"><a class="text-center link-body-emphasis d-block p-3 text-decoration-none border-bottom" href="/" title="" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-original-title="Icon-only"><img class="d-lg-flex" width="42" height="44" src="assets/img/BAUET-Logo-250x244-1.png"><span class="visually-hidden">Icon-only</span></a>
            <ul class="nav nav-pills flex-column text-center nav-flush mb-auto">
                <li class="nav-item"><a class="nav-link active link-light py-3 border-bottom rounded-0" href="#" aria-current="page" style="background: var(--bs-light);"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-house-door" style="color: var(--bs-primary);font-size: 20px;">
                            <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4z"></path>
                        </svg></a></li>
                <li class="nav-item"><a class="nav-link py-3 border-bottom rounded-0" href="#"><svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="1em" viewBox="0 0 24 24" width="1em" fill="currentColor" class="text-primary" style="font-size: 20px;">
                            <rect fill="none" height="24" width="24"></rect>
                            <path d="M21.05,17.56L3.08,18.5L3,17l17.98-0.94L21.05,17.56z M21,19.48H3v1.5h18V19.48z M23,13V4c0-1.1-0.9-2-2-2H3 C1.9,2,1,2.9,1,4v9c0,1.1,0.9,2,2,2h18C22.1,15,23,14.1,23,13z M21,13H3V4h18V13z M20,6c-1.68,0-3.04,0.98-3.21,2.23 C16.15,7.5,14.06,5.5,10.25,5.5c-4.67,0-6.75,3-6.75,3s2.08,3,6.75,3c3.81,0,5.9-2,6.54-2.73C16.96,10.02,18.32,11,20,11V6z"></path>
                        </svg></a></li>
                <li class="nav-item"><a class="nav-link py-3 border-bottom rounded-0" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-report-money text-primary" style="font-size: 20px;">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"></path>
                            <path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"></path>
                            <path d="M14 11h-2.5a1.5 1.5 0 0 0 0 3h1a1.5 1.5 0 0 1 0 3h-2.5"></path>
                            <path d="M12 17v1m0 -8v1"></path>
                        </svg></a></li>
                <li class="nav-item"><a class="nav-link text-bg-primary py-3 border-bottom rounded-0" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-message-report text-white" style="font-size: 20px;">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z"></path>
                            <path d="M12 8v3"></path>
                            <path d="M12 14v.01"></path>
                        </svg></a></li>
                <li class="nav-item"><a class="nav-link py-3 border-bottom rounded-0" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-mushroom text-primary" style="font-size: 20px;">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M20 11.1c0 -4.474 -3.582 -8.1 -8 -8.1s-8 3.626 -8 8.1a.9 .9 0 0 0 .9 .9h14.2a.9 .9 0 0 0 .9 -.9z"></path>
                            <path d="M10 12v7a2 2 0 1 0 4 0v-7"></path>
                        </svg></a></li>
            </ul>
        </div>
    </div>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-init.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
        import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-database.js";
        import { getFirestore, collection, doc, setDoc } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore.js";
    
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBF-nMMW5lG44JfHxx4HxCbf5N81geOiRs",
            authDomain: "bauet-hms-63f5b.firebaseapp.com",
            databaseURL: "https://bauet-hms-63f5b-default-rtdb.firebaseio.com",
            projectId: "bauet-hms-63f5b",
            storageBucket: "bauet-hms-63f5b.appspot.com",
            messagingSenderId: "200038506273",
            appId: "1:200038506273:web:2e141fc9ec36de049ae860"
        };
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const firestore = getFirestore(app);
    
        // Retrieve studentId from URL
        const urlParams = new URLSearchParams(window.location.search);
        const studentId = urlParams.get('id');
    
        if (!studentId) {
            alert("Student ID not found in the URL.");
        }
    
        // Function to fetch room number from Realtime Database
        async function fetchRoomNumber(studentId) {
            const dbRef = ref(database);
            const snapshot = await get(child(dbRef, `users/${studentId}`));
            if (snapshot.exists()) {
                return snapshot.val().room; // Return the room number
            } else {
                throw new Error("User not found in the database.");
            }
        }
    
        // Function to handle complaint submission
        async function submitComplaint() {
            const subject = document.querySelector('input[type="text"]').value.trim();
            const description = document.querySelector('textarea').value.trim();
    
            if (!subject || !description) {
                alert("Please fill out both the subject and description.");
                return;
            }
    
            try {
                // Fetch the room number from Realtime Database
                const roomNumber = await fetchRoomNumber(studentId);
    
                // Create a document ID using the student ID and subject
                const documentId = `${studentId}_${subject.replace(/\s+/g, '_')}`;
    
                // Create a document in the "Complaints" collection in Firestore
                await setDoc(doc(firestore, "Complaints", documentId), {
                    id: studentId,
                    subject: subject,
                    description: description,
                    room: roomNumber,
                    timestamp: new Date().toISOString() // Add a timestamp
                });
    
                alert("Complaint submitted successfully!");
                window.location.href = "profile.html?id=" + studentId;
            } catch (error) {
                console.error("Error submitting complaint:", error.message);
                alert("Failed to submit complaint. Please try again.");
            }
        }
    
        // Attach the submitComplaint function to the submit button
        document.querySelector('.btn-success').addEventListener('click', submitComplaint);
    </script>
</body>

</html>